<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>service-worker-test</title>
    <script>
      if (location.hash.indexOf('ismp') > -1) {
        var wxscript = document.createElement('script')
        wxscript.src = 'https://res.wx.qq.com/open/js/jweixin-1.3.2.js'
        document.head.appendChild(wxscript)
      }
      function goto() {
        try {
          if (wx && wx.miniProgram) {
            wx.miniProgram.navigateTo({ url: '/pages/home/home' })
          } else {
            location.href = '/test.html'
          }
        } catch (e) {
          alert(JSON.stringify(e))
        }
      }
    </script>
  </head>

  <body>
    <div>首页</div>
    <p>
      <button onclick="goto()">跳转到test页8</button>
    </p>
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('./sw-demo-cache2.js');
      } else {
        alert('no no no')
      }
    </script>
  </body>

</html>